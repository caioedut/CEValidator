/**
 * CEValidator JavaScript
 *
 * @author Caio Eduardo <caioedut@outlook.com>
 * @date 2013-10-01
 * @git https://github.com/caioedut/CEValidator
 */
$(function(){var a=$(document);$(window).on("click keydown resize",function(){$(".cevalidator_tooltip").remove()}),a.on("submit","form.validate",function(a){return $(a.currentTarget).validate()}),a.on("keyup keydown blur","form.validate [data-validate]",function(){var a=$(this),b=cevalidator.tooltip;cevalidator.tooltip=!1,cevalidator.validate(a)?cevalidator.onSuccess(a):cevalidator.onError(a),cevalidator.tooltip=b})});var cevalidator={autofocus:!0,tooltip:!0,classError:"has-error",classSuccess:"has-success",onError:function(a){var b=a.closest("label");b.length&&(a=b),a.removeClass(this.classSuccess).addClass(this.classError)},onSuccess:function(a){var b=a.closest("label");b.length&&(a=b),a.removeClass(this.classError).addClass(this.classSuccess)},validate:function(a){var b=a.data("validate").toString().split("|");a.attr("placeholder")==a.val().trim()&&a.val("");var c=!0;if("checkbox"==a.attr("type"))return a.data("current-rule","checkbox"),this.rules.checkbox(a);if("radio"==a.attr("type"))return a.data("current-rule","radio"),this.rules.radio(a);for(var d in b){var e=b[d].toLowerCase().trim();parseInt(e)?(a.data("current-rule","minlength"),this.rules.minlength(a,parseInt(e))||(c=!1)):e.indexOf("match")>=0?(a.data("current-rule","match"),this.rules.match(a)||(c=!1)):this.rules[e]?(a.data("current-rule",e),this.rules[e](a)||(c=!1)):this.rules.regex(a)||(a.data("current-rule","regex"),c=!1)}return c},addRule:function(a,b,c){"function"==typeof b&&(this.rules[a]=b,c&&(this.messages[a]=c))},rules:{success:function(){return!0},checkbox:function(a){return a.is(":checked")},radio:function(a){var b=a.attr("name"),c=a.closest("form");return c.find('input[type="radio"][name="'+b+'"]:checked').length},minlength:function(a,b){var c=a.val().toString().trim();return a.attr("minlength",b),c.length>=b},required:function(a){return this.minlength(a,1)},email:function(a){var b=a.val().trim(),c="[^\\x0d\\x22\\x5c\\x80-\\xff]",d="[^\\x0d\\x5b-\\x5d\\x80-\\xff]",e="[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+",f="\\x5c[\\x00-\\x7f]",g="\\x5b("+d+"|"+f+")*\\x5d",h="\\x22("+c+"|"+f+")*\\x22",i="("+e+"|"+g+")",j="("+e+"|"+h+")",k=i+"(\\x2e"+i+")*",l=j+"(\\x2e"+j+")*",m="^"+l+"\\x40"+k+"$",n=new RegExp(m);return n.test(b)},datetime:function(a){var b=a.val(),c=b.match(/^(\d{2})\/(\d{2})\/(\d{4}) (\d{2}):(\d{2})(:\d{2})?$/);if(null===c)return!1;var d=parseInt(c[3],10),e=parseInt(c[2],10)-1,f=parseInt(c[1],10),g=parseInt(c[4],10),h=parseInt(c[5],10),i=new Date(d,e,f,g,h);return i.getFullYear()===d&&i.getMonth()==e&&i.getDate()===f&&i.getHours()===g&&i.getMinutes()===h},date:function(a){var b=a.val(),c=/^\d{2}\/\d{2}\/\d{4}$/;if(c.test(b)){var d=b.split("/"),e=new Date(d[2],d[1]-1,d[0]);if(e.getDate()==d[0]&&e.getMonth()+1==d[1]&&e.getFullYear()==d[2])return!0}return!1},time:function(a){var b=/^[0-9]{2}:[0-9]{2}(:\d{2})?$/,c=a.val();return b.test(c)},cpf:function(a){var c,d,b=a.val().replace(/\D/g,"");if(c=0,"00000000000"==b)return!1;for(var e=1;e<=9;e++)c+=parseInt(b.substring(e-1,e))*(11-e);if(d=10*c%11,10!=d&&11!=d||(d=0),d!=parseInt(b.substring(9,10)))return!1;for(c=0,e=1;e<=10;e++)c+=parseInt(b.substring(e-1,e))*(12-e);return d=10*c%11,10!=d&&11!=d||(d=0),d==parseInt(b.substring(10,11))},cnpj:function(a){var b=a.val().replace(/\D/g,"");if(""===b||14!=b.length||"00000000000000"==b||"11111111111111"==b||"22222222222222"==b||"33333333333333"==b||"44444444444444"==b||"55555555555555"==b||"66666666666666"==b||"77777777777777"==b||"88888888888888"==b||"99999999999999"==b)return!1;for(var c=b.length-2,d=b.substring(0,c),e=b.substring(c),f=0,g=c-7,h=c;h>=1;h--)f+=d.charAt(c-h)*g--,g<2&&(g=9);var i=f%11<2?0:11-f%11;if(i!=e.charAt(0))return!1;for(c+=1,d=b.substring(0,c),f=0,g=c-7,h=c;h>=1;h--)f+=d.charAt(c-h)*g--,g<2&&(g=9);return i=f%11<2?0:11-f%11,i==e.charAt(1)},phone:function(a){var b=/^\d{10}\d?$/,c=a.val().replace(/\D/g,"");return b.test(c)},numeric:function(a){var b=a.val();return b.length>0&&parseInt(b)||"0"==b},cep:function(a){var b=/^\d{5}-\d{3}$/,c=a.val();return b.test(c)},url:function(a){var b=/^(ht|f)tps?:\/\/\w+([\.\-\w]+)?\.([a-z]{2,4})(:\d{2,5})?(\/.*)?$/i,c=a.val().replace("www.");return b.test(c)},decimal:function(a){var b=/^\d+(\.\d{2})?$/,c=a.val();return b.test(c)},match:function(a){var b=/\(["|'](.+)["|']\)/,c=a.attr("data-validate").trim(),d=c.match(b);if(d&&d[1]){var e=a.closest("form"),f=e.find('*[name="'+d[1]+'"]');if(a.val()==f.val()&&a.val().length>0)return!0}return!1},regex:function(a){var b=new RegExp(a.attr("data-validate")),c=a.val();return b.test(c)}},messages:{checkbox:"Este campo deve ser marcado",radio:"Selecione uma opção",minlength:function(a){return"Este campo deve conter no mínimo "+a.attr("minlength")+" caracteres"},required:"Este campo é obrigatório",email:"Este e-mail não é válido",datetime:"Preencha uma data e horário válidos",date:"Preencha uma data válida",time:"Este formato de hora não é válido",cpf:"Este CPF não é válido",cnpj:"Este CNPJ não é válido",phone:"Este telefone não é válido",numeric:"Este valor não é um número inteiro",cep:"Este CEP não é válido",url:"Este URL não é válido",decimal:"Este valor não é válido",match:"Os campos devem ser iguais",regex:"Preencha o campo corretamente"},showTooltip:function(a,b){if(this.tooltip){var c="Este campo é obrigatório";a.data("message")?c=a.data("message"):this.messages[b]&&(c="function"==typeof this.messages[b]?this.messages[b](a):this.messages[b]);var d=a.offset();$("body").append('<div class="cevalidator_tooltip" style="position: absolute; left: '+d.left+"px; top: "+(d.top+a.outerHeight()+5)+'px; background: #282828; color: #FFFFFF; display: none; font-family: Arial; font-size: 13px; line-height: 16px; height: auto; margin: 0; padding: 10px 15px; text-align: center; width: auto; z-index: 9999;">   '+c+'   <div class="cevalidator_tooltip_arrow" style="position: absolute; top: -3px; color: #282828; font-family: Arial; font-size: 13px; line-height: 0; height: 14px; margin: 0; margin-left: -7px; padding: 0; text-align: center; width: 14px;">&#9650;</div></div>'),$(".cevalidator_tooltip").fadeIn(400)}}};jQuery.fn.validate=function(a){cevalidator=$.extend(cevalidator,$.fn.validate.defaults,a);var b=$(this);$(".cevalidator_tooltip").remove(),b.removeClass("validate-error");var c=[];return b.find("[data-validate]").each(function(){var a=$(this);cevalidator.validate(a)?cevalidator.onSuccess(a):c.push(a)}),!c.length||(b.addClass("validate-error"),cevalidator.autofocus&&c[0].focus(),cevalidator.onError(c[0]),cevalidator.showTooltip(c[0],c[0].data("current-rule")),!1)},$.fn.validate.defaults={};